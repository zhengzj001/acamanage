import{aj as p,a7 as c,f as C,t as L,H as U,z as f,x as l,y as t,I as W,af as u,ae as v,ag as E,ah as k,ab as r,ai as T,ac as F,ad as I,aa as P}from"./index-7cad0716.js";import{E as z}from"./el-pagination-ebbc9937.js";import{c as $}from"./cloneDeep-76dc5467.js";const A=e=>p.request({url:"api/community/add",method:"post",data:e}),D=e=>p.request({url:"api/community/delete",params:e}),q=e=>p.request({url:"api/community/edit",method:"post",data:e}),B=e=>p.request({url:"api/community/page",method:"post",data:e}),N=C({data(){return{communities:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,community:{address:"",charger:0,createTime:"",deleted:0,depart:0,description:"",email:"",id:0,logo:"",mobile:"",name:"",schoolId:0,status:0,teachers:"",type:0,updateTime:"",version:0,weixin:""},formLabelWidth:80}},mounted(){this.getCommunitiesPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.community=$(e)},getCommunitiesPage(e){B({current:e,size:2}).then(n=>{console.log(n);const b=n.data.page;this.communities=b.records,this.page=b}).catch(n=>{console.log(n)})},currentchange(e){this.getCommunitiesPage(e),this.page.current=e},del(e){console.log(e),D({id:e}).then(n=>{if(n.success)this.getCommunitiesPage(this.page.current),this.page.total%this.page.size==1?this.getAdCatesPage(this.page.current-1):this.getAdCatesPage(this.page.current);else return console.log(n.msg),!1}).catch(n=>{})},toAdd(){this.dialogFormVisible=!0,this.community={address:"",charger:0,createTime:"",deleted:0,depart:0,description:"",email:"",id:0,logo:"",mobile:"",name:"",schoolId:0,status:0,teachers:"",type:0,updateTime:"",version:0,weixin:""}},save(){const e=this.community;e.id==0?A(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getCommunitiesPage(this.page.current),u(o.msg);else return u(o.msg),!1}).catch(o=>{u("网络错误联系管理员")}):q(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getCommunitiesPage(this.page.current),u(o.msg);else return u(o.msg),!1}).catch(o=>{u("网络错误联系管理员")})}}}),j={class:"communities"},H={class:"community-tools"},M={class:"dialog-footer"};function S(e,o,n,b,G,J){const s=v,i=T,h=E,g=z,m=F,d=I,V=P,y=k;return L(),U(W,null,[f("div",j,[f("div",H,[l(s,{type:"warning",onClick:e.toAdd},{default:t(()=>[r("添加")]),_:1},8,["onClick"])]),l(h,{data:e.communities,style:{width:"100%"}},{default:t(()=>[l(i,{fixed:"",prop:"id",label:"#",width:"50"}),l(i,{prop:"address",label:"团社地址"}),l(i,{prop:"charger",label:"团社会长"}),l(i,{prop:"createTime",label:"创建时间"}),l(i,{prop:"deleted",label:"逻辑删除"}),l(i,{prop:"depart",label:"学院编号"}),l(i,{prop:"description",label:"团社介绍"}),l(i,{prop:"email",label:"团社邮箱"}),l(i,{prop:"logo",label:"团社logo"}),l(i,{prop:"mobile",label:"团社电话"}),l(i,{prop:"name",label:"团社名称"}),l(i,{prop:"schoolId",label:"#"}),l(i,{prop:"status",label:"状态"}),l(i,{prop:"teachers",label:"导师"}),l(i,{prop:"type",label:"团社类型"}),l(i,{prop:"updateTime",label:"更新时间"}),l(i,{prop:"version",label:"#"}),l(i,{prop:"weixin",label:"团社公众号"}),l(i,{fixed:"right",label:"操作",width:"120"},{default:t(a=>[l(s,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(a.row)},{default:t(()=>[r("更新")]),_:2},1032,["onClick"]),l(s,{link:"",type:"primary",size:"small",onClick:w=>e.del(a.row.id)},{default:t(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(g,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(y,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[19]||(o[19]=a=>e.dialogFormVisible=a),title:"广告类型编辑"},{footer:t(()=>[f("span",M,[l(s,{onClick:o[18]||(o[18]=a=>e.dialogFormVisible=!1)},{default:t(()=>[r("Cancel")]),_:1}),l(s,{type:"primary",onClick:e.save},{default:t(()=>[r(" 保存 ")]),_:1},8,["onClick"])])]),default:t(()=>[l(V,{model:e.community},{default:t(()=>[l(d,{label:"团社地址","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.address,"onUpdate:modelValue":o[0]||(o[0]=a=>e.community.address=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社会长","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.charger,"onUpdate:modelValue":o[1]||(o[1]=a=>e.community.charger=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"创建时间","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.createTime,"onUpdate:modelValue":o[2]||(o[2]=a=>e.community.createTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"逻辑删除","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.deleted,"onUpdate:modelValue":o[3]||(o[3]=a=>e.community.deleted=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"学院编号","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.depart,"onUpdate:modelValue":o[4]||(o[4]=a=>e.community.depart=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社介绍","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.description,"onUpdate:modelValue":o[5]||(o[5]=a=>e.community.description=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社邮箱","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.email,"onUpdate:modelValue":o[6]||(o[6]=a=>e.community.email=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"ID","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.id,"onUpdate:modelValue":o[7]||(o[7]=a=>e.community.id=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社logo","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.logo,"onUpdate:modelValue":o[8]||(o[8]=a=>e.community.logo=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社电话","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.mobile,"onUpdate:modelValue":o[9]||(o[9]=a=>e.community.mobile=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社名称","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.name,"onUpdate:modelValue":o[10]||(o[10]=a=>e.community.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"SchoolID","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.schoolId,"onUpdate:modelValue":o[11]||(o[11]=a=>e.community.schoolId=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"状态","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.status,"onUpdate:modelValue":o[12]||(o[12]=a=>e.community.status=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"导师","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.teachers,"onUpdate:modelValue":o[13]||(o[13]=a=>e.community.teachers=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"类型","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.type,"onUpdate:modelValue":o[14]||(o[14]=a=>e.community.type=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"更新时间","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.updateTime,"onUpdate:modelValue":o[15]||(o[15]=a=>e.community.updateTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"version","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.version,"onUpdate:modelValue":o[16]||(o[16]=a=>e.community.version=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"团社公众号","label-width":e.formLabelWidth},{default:t(()=>[l(m,{modelValue:e.community.weixin,"onUpdate:modelValue":o[17]||(o[17]=a=>e.community.weixin=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const R=c(N,[["render",S]]);export{R as default};
