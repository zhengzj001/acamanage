import{aj as v,a7 as P,r as p,q as w,af as c,t as B,H as q,x as e,y as o,ae as U,ag as $,ah as F,ab as u,z as M,ai as N,ac as D,ad as G,aa as j}from"./index-7cad0716.js";import{E as z}from"./index-0f6b1385.js";const A=n=>v.request({url:"api/rolePermission/all",params:n}),H=n=>v.request({url:"api/rolePermission/add",method:"post",data:n}),J=n=>v.request({url:"api/rolePermission/edit",method:"post",data:n});const K={class:"dialog-footer"},L={__name:"rolePermission",setup(n){const d=p(!1),g=p([]),m=p(!0),s=p({id:"",roleId:"",permissionIds:""});w(()=>{I()});const I=async()=>{const a=await A();if(a.code!==1)return c("数据获取失败");g.value=a.data.rolePermissions,console.log(a),console.log(a.code)},y=()=>{s.value={id:"",roleId:"",permissionIds:""},m.value=!0,d.value=!0},V=async a=>{if(m){const l=await H(a.value);console.log(l)}else{const l=await J(a.value);console.log(l)}},E=a=>{m.value=!1,d.value=!0,s.value={...a},console.log(a)},b=async a=>{z.confirm("是否删除该用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b({id:val.id}).then(l=>{l.code===1?(c({type:"success",message:"删除成功"}),this.findPage()):c({type:"error",message:"删除失败"})})}).catch(()=>{c({type:"info",message:"取消删除"})})};return(a,l)=>{const i=U,r=N,x=$,_=D,f=G,k=j,C=F;return B(),q("div",null,[e(i,{type:"primary",onClick:y},{default:o(()=>[u("添加用户")]),_:1}),e(x,{data:g.value},{default:o(()=>[e(r,{prop:"id",label:"id",align:"center"}),e(r,{prop:"roleId",label:"roleId",align:"center"}),e(r,{prop:"permissionIds",label:"permissionIds",align:"center"}),e(r,{prop:"createTime",label:"createTime",align:"center"}),e(r,{prop:"updateTime",label:"updateTime",align:"center"}),e(r,{label:"操作"},{default:o(t=>[e(i,{type:"primary",onClick:T=>E(t.row)},{default:o(()=>[u("编辑")]),_:2},1032,["onClick"]),e(i,{type:"danger",onClick:T=>b(t.row.id)},{default:o(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(C,{modelValue:d.value,"onUpdate:modelValue":l[5]||(l[5]=t=>d.value=t),title:m.value?"添加学生信息":"修改学生信息"},{footer:o(()=>[M("span",K,[e(i,{onClick:l[3]||(l[3]=t=>d.value=!1)},{default:o(()=>[u("取消")]),_:1}),e(i,{type:"primary",onClick:l[4]||(l[4]=t=>V("form"))},{default:o(()=>[u(" 确定 ")]),_:1})])]),default:o(()=>[e(k,{model:s.value},{default:o(()=>[e(f,{label:"id",prop:"id"},{default:o(()=>[e(_,{modelValue:s.value.id,"onUpdate:modelValue":l[0]||(l[0]=t=>s.value.id=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(f,{label:"roleId",prop:"roleId"},{default:o(()=>[e(_,{modelValue:s.value.roleId,"onUpdate:modelValue":l[1]||(l[1]=t=>s.value.roleId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(f,{label:"permissionIds",prop:"permissionIds"},{default:o(()=>[e(_,{modelValue:s.value.permissionIds,"onUpdate:modelValue":l[2]||(l[2]=t=>s.value.permissionIds=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},R=P(L,[["__scopeId","data-v-af5dbfc6"]]);export{R as default};
