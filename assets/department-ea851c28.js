import{an as _,aj as u,a7 as y,f as F,t as E,H as k,z as g,x as t,y as o,I as P,af as r,ae as A,ag as v,ah as z,ab as m,ai as I,ac as q,ad as D,aa as L}from"./index-7cad0716.js";import{E as N}from"./el-pagination-ebbc9937.js";import{c as T}from"./cloneDeep-76dc5467.js";const U=e=>u.request({url:"/api/department/page",method:"post",data:e}),$=e=>u.request({url:"/api/department/delete",method:"get",params:e}),W=e=>u.request({url:"/api/department/add",method:"post",data:e}),j=e=>u.request({url:"/api/department/edit",method:"post",data:e}),f=_.create({baseURL:"http://api.jqrjq.cn",withCredentials:!0});f.interceptors.request.use(e=>e,e=>Promise.reject(e));f.interceptors.response.use(e=>e,e=>Promise.reject(e));const B=F({data(){return{adCates:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,adCate:{departName:"",id:0,departCode:"",departDesc:"",schoolId:"",departFype:""},formLabelWidth:80}},mounted(){this.getAdCatesPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.adCate=T(e)},getAdCatesPage(e){U({current:e,size:5}).then(d=>{console.log(d);const c=d.data.page;this.adCates=c.records,this.page=c}).catch(d=>{console.log(d)})},currentchange(e){this.getAdCatesPage(e),this.page.current=e},del(e){console.log(e),$({id:e}).then(d=>{if(d.success)this.getAdCatesPage(this.page.current);else return console.log(d.msg),!1}).catch(d=>{})},toAdd(){this.adCate={depart_name:"",id:0,depart_code:"",depart_desc:"",school_id:"",depart_type:""},this.dialogFormVisible=!0},save(){const e=this.adCate;e.id==0?W(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),r(a.msg);else return r(a.msg),!1}).catch(a=>{r("网络错误联系管理员")}):j(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getAdCatesPage(this.page.current),r(a.msg);else return r(a.msg),!1}).catch(a=>{r("网络错误联系管理员")})}}}),H={class:"adCates"},M={class:"adcate-tools"},R={class:"dialog-footer"};function G(e,a,d,c,J,K){const n=A,s=I,h=v,C=N,i=q,p=D,b=L,V=z;return E(),k(P,null,[g("div",H,[g("div",M,[t(n,{type:"warning",onClick:e.toAdd},{default:o(()=>[m("添加")]),_:1},8,["onClick"])]),t(h,{data:e.adCates,style:{width:"100%"}},{default:o(()=>[t(s,{fixed:"",prop:"id",label:"#",width:"50"}),t(s,{prop:"departName",label:"部门名称"}),t(s,{prop:"departCode",label:"部门英文名"}),t(s,{prop:"departDesc",label:"部门描述"}),t(s,{prop:"schoolId",label:"学校id"}),t(s,{prop:"departFype",label:"学院类型"}),t(s,{fixed:"right",label:"操作",width:"120"},{default:o(l=>[t(n,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(l.row)},{default:o(()=>[m("更新")]),_:2},1032,["onClick"]),t(n,{link:"",type:"primary",size:"small",onClick:w=>e.del(l.row.id)},{default:o(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(C,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),t(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[6]||(a[6]=l=>e.dialogFormVisible=l),title:"话题编辑"},{footer:o(()=>[g("span",R,[t(n,{onClick:a[5]||(a[5]=l=>e.dialogFormVisible=!1)},{default:o(()=>[m("Cancel")]),_:1}),t(n,{type:"primary",onClick:e.save},{default:o(()=>[m(" 保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[t(b,{model:e.adCate},{default:o(()=>[t(p,{label:"部门名称","label-width":e.formLabelWidth},{default:o(()=>[t(i,{modelValue:e.adCate.departName,"onUpdate:modelValue":a[0]||(a[0]=l=>e.adCate.departName=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(p,{label:"部门英文名","label-width":e.formLabelWidth},{default:o(()=>[t(i,{modelValue:e.adCate.departCode,"onUpdate:modelValue":a[1]||(a[1]=l=>e.adCate.departCode=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(p,{label:"部门描述","label-width":e.formLabelWidth},{default:o(()=>[t(i,{modelValue:e.adCate.departDesc,"onUpdate:modelValue":a[2]||(a[2]=l=>e.adCate.departDesc=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(p,{label:"学校id","label-width":e.formLabelWidth},{default:o(()=>[t(i,{modelValue:e.adCate.schoolId,"onUpdate:modelValue":a[3]||(a[3]=l=>e.adCate.schoolId=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(p,{label:"学院类型","label-width":e.formLabelWidth},{default:o(()=>[t(i,{modelValue:e.adCate.departFype,"onUpdate:modelValue":a[4]||(a[4]=l=>e.adCate.departFype=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const X=y(B,[["render",G]]);export{X as default};
