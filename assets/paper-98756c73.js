import{aj as m,a7 as C,f as y,t as E,H as k,z as f,x as l,y as o,I as F,af as n,ae as I,ag as L,ah as P,ab as u,ai as U,ac as W,ad as z,aa as v}from"./index-7cad0716.js";import{E as T}from"./el-pagination-ebbc9937.js";import{c as $}from"./cloneDeep-76dc5467.js";const A=e=>m.request({url:"api/paper/add",method:"post",data:e}),D=e=>m.request({url:"api/paper/delete",params:e}),q=e=>m.request({url:"api/paper/edit",method:"post",data:e}),B=e=>m.request({url:"api/paper/page",method:"post",data:e}),N=y({data(){return{papers:[],page:{colums:[],current:0,size:0},dialogFormVisible:!1,paper:{attachment:"",count:0,id:0,name:"",publication:"",publicationCate:"",publishTime:"",type:"",userId:0},formLabelWidth:80}},mounted(){this.getpapersPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.paper=$(e)},getpapersPage(e){B({current:e,size:10}).then(i=>{console.log(i);const b=i.data.page;this.papers=b.records,this.page=b}).catch(i=>{console.log(i)})},currentchange(e){this.getpapersPage(e),this.page.current=e},del(e){console.log(e),D({id:e}).then(i=>{if(i.success)this.getpapersPage(this.page.current),this.page.total%this.page.size==1?this.getAdCatesPage(this.page.current-1):this.getAdCatesPage(this.page.current);else return console.log(i.msg),!1}).catch(i=>{})},toAdd(){this.dialogFormVisible=!0,this.paper={attachment:"",count:0,id:0,name:"",publication:"",publicationCate:"",publishTime:"",type:"",userId:0}},save(){const e=this.paper;e.id==0?A(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getpapersPage(this.page.current),n(a.msg);else return n(a.msg),!1}).catch(a=>{n("网络错误联系管理员")}):q(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.getpapersPage(this.page.current),n(a.msg);else return n(a.msg),!1}).catch(a=>{n("网络错误联系管理员")})}}}),j={class:"papers"},H={class:"paper-tools"},M={class:"dialog-footer"};function G(e,a,i,b,J,K){const d=I,p=U,g=L,h=T,s=W,r=z,V=v,c=P;return E(),k(F,null,[f("div",j,[f("div",H,[l(d,{type:"warning",onClick:e.toAdd},{default:o(()=>[u("添加")]),_:1},8,["onClick"])]),l(g,{data:e.papers,style:{width:"100%"}},{default:o(()=>[l(p,{fixed:"",prop:"id",label:"ID",width:"50"}),l(p,{prop:"name",label:"论文题目"}),l(p,{prop:"publication",label:"刊物"}),l(p,{prop:"publicationCate",label:"刊物种类"}),l(p,{prop:"type",label:"论文类型"}),l(p,{prop:"userId",label:"作者"}),l(p,{prop:"publishTime",label:"发表时间"}),l(p,{prop:"count",label:"引用次数"}),l(p,{prop:"attachment",label:"佐证材料"}),l(p,{fixed:"right",label:"操作",width:"120"},{default:o(t=>[l(d,{link:"",type:"primary",size:"small",onClick:w=>e.toEdit(t.row)},{default:o(()=>[u("更新")]),_:2},1032,["onClick"]),l(d,{link:"",type:"primary",size:"small",onClick:w=>e.del(t.row.id)},{default:o(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(h,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(c,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[10]||(a[10]=t=>e.dialogFormVisible=t),title:"添加论文"},{footer:o(()=>[f("span",M,[l(d,{onClick:a[9]||(a[9]=t=>e.dialogFormVisible=!1)},{default:o(()=>[u("Cancel")]),_:1}),l(d,{type:"primary",onClick:e.save},{default:o(()=>[u("保存")]),_:1},8,["onClick"])])]),default:o(()=>[l(V,{model:e.paper},{default:o(()=>[l(r,{label:"ID","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.paper.id,"onUpdate:modelValue":a[0]||(a[0]=t=>e.paper.id=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"论文题目","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.paper.name,"onUpdate:modelValue":a[1]||(a[1]=t=>e.paper.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"刊物","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.paper.publication,"onUpdate:modelValue":a[2]||(a[2]=t=>e.paper.publication=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"刊物种类","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.paper.publicationCate,"onUpdate:modelValue":a[3]||(a[3]=t=>e.paper.publicationCate=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"论文类型","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.paper.type,"onUpdate:modelValue":a[4]||(a[4]=t=>e.paper.type=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"作者","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.paper.userId,"onUpdate:modelValue":a[5]||(a[5]=t=>e.paper.userId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"发表时间","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.paper.publishTime,"onUpdate:modelValue":a[6]||(a[6]=t=>e.paper.publishTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"引用次数","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.paper.count,"onUpdate:modelValue":a[7]||(a[7]=t=>e.paper.count=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"佐证材料","label-width":e.formLabelWidth},{default:o(()=>[l(s,{modelValue:e.paper.attachment,"onUpdate:modelValue":a[8]||(a[8]=t=>e.paper.attachment=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const S=C(N,[["render",G]]);export{S as default};
